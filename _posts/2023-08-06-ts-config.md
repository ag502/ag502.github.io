---
title: TSConfig 파일
date: 2023-08-06
categories: [TypeScript]
tags: [TypeScript]
image:
  path: /assets/img/ts-main.png
  alt: typescript logo
---

## 💻 TSConfig 파일이란?

`TypeScript`가 실행되기 위해서는 `JavaScript`로 사전에 컴파일(transpile)되어야 합니다. 이 단계에서 사용되는 옵션들을 `json` 형식으로 작성한 파일이 `TSConfig` 파일입니다. `TSConfig` 파일에서 사용되는 옵션들은 `CLI`의 플래그로 지정해 사용할 수도 있습니다.  
`TSConfig` 파일이 존재하는 디렉토리는 `TypeScript` 프로젝트의 루트임을 의미합니다. 만약 `tsc` 명령어를 실행한 디렉토리에 `TSConfig` 파일이 없다면, 컴파일러는 `TSConfig` 파일을 찾을때 까지 프로젝트 디렉토리를 순회하게되고, `TSConfig` 파일이 있는 디렉토리를 루트 디렉토리로 간주합니다.  
`-p` 또는 `--project` 플래그에 `TSConfig` 파일이 있는 디렉토리 경로나, `TSConfig` 파일대신 사용할 파일의 정확한 경로를 전달하면 `TSConfig` 파일을 직접 설정 할 수 있습니다.

```shell
tsc -p path/to/tsconfig.json
```

## 💻 TSConfig 파일의 구성

`TSConfig` 파일은 아래와 같이 크게 다섯가지 옵션으로 구성되어있습니다.

```json
{
  "files": [],
  "extends": [],
  "include": [],
  "exclude": [],
  "references": [],
  "compilerOptions": {}
}
```

위의 다섯가지 옵션은 다시 두가지로 분류 할 수 있는데 `Root Option`, `Compiler Option` 입니다.

- Root Option
  `Root Option`은 `TSConfig` 옵션중 `files`, `extends`, `include`, `exclude`, `references`를 의미합니다.  
  이 옵션들은 `TypeScript` 프로젝트의 설정 방법과 관련된 옵션들입니다. 예를들어, 어떤 `TypeScript` 파일이 컴파일 되어야 하는지를 설정할때 해당 옵션을 사용합니다.  
  (❗️ `references`의 경우 `tsc CLI`에서 플래그를 통해 설정할 수 없습니다.)

- Compiler Option
  `TypeScript` 컴파일러에 대한 설정입니다. 예를들어, 컴파일된 `JavaScript` 파일이 위치할 디렉토리 설정을 `Compiler Option`에서 정합니다.

## 💻 Root Option

### 👨‍💻 files

`Default`: `false`
컴파일하고자 하는 `TypeScript` 파일들의 경로를 배열로 전달 합니다. 이때 경로는 상대경로와 절대경로 모두 가능하지만, 상대경로는 `TSConfig` 파일의 경로(root)에 대한 상대경로 입니다.

아래와 같은 디렉토리 구조를 가진 프로젝트가 있다고 가정해보겠습니다.

![files-options-dir-tree-1](/assets/img/ts-config/files-options-dir-tree-1.png)

위 구조를 가진 프로젝트에 `TSConfig` 파일의 `files` 옵션은 다음과 같이 작성했습니다.

```json
{
  "files": [
    "./main.ts",
    "./src/index.ts",
    "src/components/Comp1.ts",
    "src/components/Comp2.ts"
  ]
}
```

각 파일들의 경로가 `TSConfig` 파일의 위치에 대해 상대경로로 작성되었음을 알 수 있습니다.

옵션에 명시해준 파일들은 `tsc` 명령어를 실행할 경우 컴파일되어 `JavaScript` 파일이 생성됩니다. `src/components/DummyComp.ts` 파일은 배열에서 제외되었기 때문에 `JavaScript` 파일이 생성되지 않습니다. 또한 컴파일된 파일들의 생성 위치를 특별히 지정해 주지 않았기 때문에 원래의 `TypeScript` 파일이 위치하는 곳에 생성됩니다.

![files-options-dir-tree-2](/assets/img/ts-config/files-options-dir-tree-2.png)

#### 🖊 루트 디렉토리 외부의 파일

> `TSConfig`가 있는 위치(루트 디렉토리)보다 상위에 위치하고 있는 파일도 컴파일 할 수 있습니다.
> ![files-options-dir-tree-3](/assets/img/ts-config/files-options-dir-tree-3.png)  
> 위 예시는 `TSConfig` 파일이 위치하는 디렉토리 외부에 `outside.ts`라는 파일이 존재하고 있는 구조를 나타내고 있습니다.
> `outside.ts`를 컴파일 하려면 `TSConfig` `files` 옵션을 아래와 같이 설정해야 합니다.
>
> ```json
> {
>   "files": [
>     "../outside.ts",
>     "./main.ts",
>     "./src/index.ts",
>     "src/components/Comp1.ts",
>     "src/components/Comp2.ts"
>   ]
> }
> ```

### 👨‍💻 include

`Default`: `[] if files is specified; **/* otherwise`  
컴파일 하고자 하는 `TypeScript` 파일의 이름이나 경로를 배열로 전달합니다. 이때 `glob pattern`을 사용할 수 있습니다. 패턴을 사용하여 파일들의 경로를 명시 할 수 있어, 다수의 파일을 포함할 때 `files` 옵션보다 유리합니다.

#### 🖊 glob patterns

> - `?`
>   하나의 문자와 일치합니다.
> - `*`
>   0개 이상의 문자와 일치합니다.
> - `**`
>   모든 레밸에 중첩된 모든 디렉터리와 일치합니다.

```json
{
  "include": ["./main.ts", "./src/**/*.ts"]
}
```

위의 `TSConfig` 설정은 `main.ts` 파일과, `src` 디렉토리 하위의 모든 디렉토리 및 파일을 컴파일 대상으로 포함한다는 의미입니다. `tsc` 명령어를 실행하면 아래와 같은 결과가 나옵니다.

![include-options-dir-tree-1](/assets/img/ts-config/include-options-dir-tree-1.png)

만약 디렉토리 경로에 확장자를 명시하지 않는다면, `.ts` 파일과 `.d.ts` 파일이 모두 포함되며 만약 `allowJS` 옵션이 `true`일 경우 `.js` 파일도 포함됩니다. 즉 `./src/**/*`는 `./src/**/*.ts`, `./src/**/*.d.ts`, `./src/**/*.js`(`allowJS`가 `true`인 경우)를 의미합니다.

### 👨‍💻 exclude

`Default`: `node_modules`, `bower_components`, `jspm_packages`, `outDir`  
`include`에 포함된 파일중, 컴파일에서 제외할 파일들의 이름이나 경로를 배열로 전달합니다. `include`와 마찬가지로 `glob pattern`을 사용할 수 있습니다.  
`include` 옵션에서 살펴본 `TSConfig` 파일은 `src/components/DummyComp.ts`도 컴파일 대상으로 포함이 됩니다. 해당 파일을 제외 시키려먼 `exclude` 옵션을 추가해주어야 합니다.

```json
{
  "include": ["./main.ts", "./src/**/*.ts"],
  "exclude": ["./src/**/DummyComp.ts"]
}
```

위 예시는 `include`에 명시된 컴파일 대상에서 `src` 디렉토리 하위의 모든 `DummyComp.ts` 파일을 제외시킨다는 의미입니다. 위 `TSConfig` 설정대로 `tsc`를 실행시킨 결과는 다음과 같습니다.

![include-options-dir-tree-2](/assets/img/ts-config/include-options-dir-tree-2.png)

`exclude`에 파일을 명시할 때 주의할 점은, 컴파일에서 제외될 파일(`exclude` 옵션에 명시된 파일)이 컴파일에 포함될 파일(`include 옵션에 명시된 파일`)에서 사용될때 컴파일러는 `exclude`에 명시했더라도 해당 파일을 컴파일 시킵니다.

```json
{
  "include": ["./main.ts", "./src/**/*.ts"],
  "exclude": ["./src/**/DummyComp.ts"]
}
```

```javascript
// Comp1.ts
import "./DummyComp";
```

위 예시는 `DummyComp`를 컴파일에서 제외하게끔 설정한 `TSConfig` 파일과, 해당 파일을 컴파일 대상인 `Comp1.ts` 파일에 `import` 시킨 코드 입니다. 컴파일 결과는 다음과 같습니다.

![include-options-dir-tree-1](/assets/img/ts-config/include-options-dir-tree-1.png)

`DummyComp.ts` 파일이 `Comp1.ts`에 사용되었기 때문에 컴파일 된것을 볼 수 있습니다.

## 💻 Compiler Option

### 👨‍💻 Emit

#### 🙋‍♂️ outDir

### 👨‍💻 TypeChecking

#### 🙋‍♂️ strict

`TypeScript`로 코드를 작성할 때, `true`로 설정하는것이 권장되는 옵션입니다. 해당 옵션을 `true`로 설정할 경우 모든 `strict mode`와 연관된 옵션들(`alwaysStrict`, `strictNullChecks`, `strictBindCallApply`, `strictFunctionTypes`, `strictPropertyInitialization`, `noImplicitAny`, `noImplicitThis`, `useUnknownInCatchVariables`)이 모두 `true`로 설정됩니다.

#### 🙋‍♂️ alwaysStrict

`Default`: `true if strict; false otherwise`  
`alwaysStrict`를 `true`로 설정하면 `JavaScript`파일이 `ECMAScript`의 `strict mode`로 컴파일됩니다.

```json
{
  "include": ["./main.ts", "./src/**/*.ts"],
  "exclude": ["./src/**/DummyComp.ts"],
  "compilerOptions": {
    "alwaysStrict": true
  }
}
```

```typescript
// Comp1.ts
const a = 1;
console.log(1);
```

위의 `TSConfig` 설정으로 컴파일하게 되면 `Comp1.ts` 파일은 다음과 같이 컴파일 됩니다.

```javascript
"use strict";
var a = 1;
console.log(a);
```

컴파일된 `JavaScript` 파일에 `use strict`가 추가되었음을 확인할 수 있습니다.

#### 🙋‍♂️ noImplicitAny

`Default`: `true if strict; false otherwise`
`TypeScript` 변수에 타입을 지정하지 않으면, `any` 타입으로 해당 변수의 타입을 추론합니다. 타입이 `any`일 경우 오류가 발생할 수 있습니다.

```typescript
function fn(s) {
  console.log(s.subtr(3));
}

fn(42);
```

위 코드에서 `subtr`은 `substr`를 잘못 입력한 것 입니다. 하지만 인자 `s`의 타입이 `any`로 추론이 되어 `TypeScript`는 오류를 발생시키지 못하고 런타임시 오류가 발생하게 됩니다.  
이때 `noImplicitAny` 옵션을 `true`로 설정해 변수의 타입을 지정하지 않아 `any`로 추론되는것을 방지할 수 있습니다.
